<%- include('../_layouts/adminheader') %>

<h2 class="page-title srf">Add a Product</h2>
<a href="/admin/products" class="btn btn-success">Back to all products</a>
<br><br>

<form class="row g-3" action="/admin/products/add-product" enctype="multipart/form-data" method="post">

  <div class="form-group">
    <label class="form-label" for="">Title</label>
    <input class="form-control" type="text" name="title" value="<%= title %>" placeholder="Title">
  </div>

  <div class="form-group">
    <label class="form-label" for="">Description</label>
    <textarea class="form-control" name="desc" rows="10" cols="30" placeholder="Description"><%= desc %></textarea>
  </div>

  <div class="form-group">
    <label class="form-label" for="">Category</label>
    <select class="form-control" name="category">
      <% categories.forEach( cat => { %>
        <option value="<%= cat.slug %>"><%= cat.title %></option>
      <% }) %>
    </select>
  </div>

  <div class="form-group">
    <label class="form-label" for="">Price</label>
    <input class="form-control" type="text" name="price" value="<%= price %>" placeholder="Price">
  </div>

  <div class="form-group">
    <label class="form-label" for="">Image</label>
    <input class="form-control" type="file" name="image" id="img">
    <img src="#" id="imgPreview" alt=""></img>
  </div>

  <div class="col-12">
    <button class="btn btn-success" type="submit">Submit</button>
  </div>

</form>

<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script>

  function readURL(input) {
    if(input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function(e) {
        $("#imgPreview").attr('src', e.target.result).width(100).height(100);
      }
      reader.readAsDataURL(input.files[0]);
    }
  }

  $("#img").change(function() {
    readURL(this);
  });

</script>

<%- include('../_layouts/adminfooter') %>
